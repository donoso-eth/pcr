enum ProposalStatus {
  Pending
  Accepted
  Rejected
}

type Reward @entity {
  id: ID!
  title: String
  url: String
  admin: User!
  tokenImpl:String!
  optimisticOracleImpl:String!

  rewardToken: String
  rewardAmount: BigInt!
  token: String

  currentdeposit: BigInt!
  rewardStatus: BigInt!
  rewardStep: BigInt!
  earliestNextAction: BigInt!

  interval: BigInt!
  target: BigInt!
  targetCondition: BigInt!
  rewardTargetHitory: [RewardTargetHitory!]! @derivedFrom(field: "reward")

  optimisticOracleLivenessTime: BigInt!
  priceIdentifier: Bytes
  customAncillaryData: Bytes

  totalDistributed: BigInt!
  currentIndex: BigInt!
  unitsIssued: BigInt!
  userMemberships:BigInt!
  rewardIndexHistory: [RewardIndexHistory!]! @derivedFrom(field: "reward")


  currentProposal: Proposal

}

type User @entity {
 id:ID!
 rewardsCreated: [Reward!] @derivedFrom(field: "admin")
 rewardsMembership: [UserMembership!] @derivedFrom(field: "beneficiary")
 proposaslsSubmitted: [Proposal!] @derivedFrom(field: "proposer")

}

type UserMembership @entity {
  id: ID!
  beneficiary: User!
  reward: Reward!
  units: BigInt!
}

type RewardTargetHitory @entity {
  id: ID!
  reward: Reward!
  target: BigInt
  targetCondition: BigInt
  timeStamp: BigInt
}

type RewardIndexHistory @entity {
  id: ID!
  reward: Reward!
  index: BigInt!
  timeStamp: BigInt!
}

type Proposal @entity {
  id: ID!
  proposer: User!
  startQualifying: BigInt!
  startLivenessPeriod: BigInt!
  reward: Reward!
  status: ProposalStatus
}

type ProposalSummary @entity {
  id: ID!
  reward: Reward!
  timeStamp: BigInt
  result: BigInt
}
